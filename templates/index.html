<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>네트워크 자동화</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <!-- 오류 메시지가 여기에 동적으로 추가됨 -->
        
        <!-- 탭 메뉴 -->
        <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab">
                    기본정보
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">
                    설정작업
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="learning-tab" data-bs-toggle="tab" data-bs-target="#learning" type="button" role="tab">
                    CLI 학습 및 자동화
                </button>
            </li>
        </ul>

        <!-- 탭 컨텐츠 -->
        <div class="tab-content" id="mainTabsContent">
            <!-- 기본정보 탭 -->
            <div class="tab-pane fade show active" id="basic" role="tabpanel">
                <div class="card border-top-0">
                    <div class="card-body">
                        <h5 class="card-title">장비 추가</h5>
                        <form id="deviceForm">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="deviceName" class="form-label">장비 이름</label>
                                    <input type="text" class="form-control" id="deviceName" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="deviceVendor" class="form-label">벤더</label>
                                    <select class="form-select" id="deviceVendor" required>
                                        <option value="">벤더 선택</option>
                                        <option value="cisco">Cisco</option>
                                        <option value="juniper">Juniper</option>
                                        <option value="hp">HP</option>
                                        <option value="arista">Arista</option>
                                        <option value="handreamnet">한드림넷</option>
                                        <option value="coreedge">코어엣지네트웍스</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="deviceIP" class="form-label">IP 주소</label>
                                    <input type="text" class="form-control" id="deviceIP" required>
                                </div>
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary">장비 추가</button>
                                </div>
                            </div>
                        </form>

                        <div class="mt-4">
                            <h5>등록된 장비 목록</h5>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>장비 이름</th>
                                            <th>벤더</th>
                                            <th>IP</th>
                                            <th>작업</th>
                                        </tr>
                                    </thead>
                                    <tbody id="deviceListBasic">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 설정작업 탭 -->
            <div class="tab-pane fade" id="settings" role="tabpanel">
                <div class="card border-top-0">
                    <div class="card-body">
                        <h5 class="card-title">설정 작업</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="configDevice" class="form-label">장비 선택</label>
                                <select class="form-select" id="configDevice">
                                    <option value="">장비 선택</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="configType" class="form-label">작업 유형</label>
                                <select class="form-select" id="configType">
                                    <option value="">작업 선택</option>
                                    <option value="vlan_config">VLAN 설정</option>
                                    <option value="interface_config">인터페이스 설정</option>
                                    <option value="ip_config">IP 주소 설정</option>
                                    <option value="routing_config">라우팅 설정</option>
                                    <option value="acl_config">ACL 설정</option>
                                    <option value="snmp_config">SNMP 설정</option>
                                    <option value="ntp_config">NTP 설정</option>
                                </select>
                            </div>
                        </div>

                        <div id="configParams" class="mt-3">
                            <!-- 작업 유형별 파라미터 폼이 동적으로 추가됨 -->
                        </div>

                        <div class="mt-3">
                            <button type="button" class="btn btn-primary" id="generateScript">스크립트 생성</button>
                        </div>

                        <div id="scriptResult" class="mt-3" style="display: none;">
                            <h6>생성된 스크립트:</h6>
                            <pre class="bg-light p-3 rounded"><code id="scriptContent"></code></pre>
                            <button type="button" class="btn btn-success" id="executeScript">스크립트 실행</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CLI 학습 및 자동화 탭 -->
            <div class="tab-pane fade" id="learning" role="tabpanel">
                <div class="card border-top-0">
                    <div class="card-body">
                        <h5 class="card-title">자동 학습</h5>
                        <!-- 자동학습 섹션 -->
                        <div class="mb-3">
                            <label for="learningVendor" class="form-label">벤더 선택</label>
                            <select class="form-select" id="learningVendor">
                                <option value="">벤더를 선택하세요</option>
                                <option value="cisco">Cisco</option>
                                <option value="juniper">Juniper</option>
                                <option value="hp">HP</option>
                                <option value="arista">Arista</option>
                                <option value="handreamnet">한드림넷</option>
                                <option value="coreedge">코어엣지네트웍스</option>
                            </select>
                        </div>

                        <button type="button" class="btn btn-primary w-100" id="startLearning" disabled>
                            자동 학습 시작
                        </button>

                        <div id="learningProgress" class="mt-3" style="display: none;">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                     role="progressbar" 
                                     style="width: 0%">
                                </div>
                            </div>
                        </div>

                        <div id="learningResult" class="mt-3"></div>

                        <!-- 장비 목록 섹션 -->
                        <div class="mt-4">
                            <h5>장비 목록</h5>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>장비 이름</th>
                                            <th>벤더</th>
                                            <th>IP</th>
                                            <th>작업</th>
                                        </tr>
                                    </thead>
                                    <tbody id="deviceList">
                                        <!-- 장비 목록이 여기에 동적으로 추가됨 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

